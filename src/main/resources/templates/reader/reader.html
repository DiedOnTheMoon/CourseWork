<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org"
      lang="en">
<head th:include="parts/common.html :: commonHead">
    <meta charset="UTF-8">
    <title>Reader</title>
</head>
<body>
    <div th:include="parts/common.html :: navigation"></div>
    <div>
        <div class="form-group col-md-1 pt-5">
            <label> First name:<p></p>
                <input type="text" readonly name="firstName" th:field="${reader.firstName}">
            </label>
        </div>
        <p></p>
        <div class="form-group col-md-1">
            <label> Last name:<p></p>
                <input type="text" readonly name="lastName" th:field="${reader.lastName}">
            </label>
        </div>
    </div>
    <div th:if="${reader.getSizeBooks() != 0}">
        <label> Taken books without Indebtedness</label>
        <p></p>
        <form th:method="POST" th:action="@{/reader/filter/book/}">
            <div class="form-group col-md-1 pt-3">
                <label>Search
                    <input type="text" name="bookFilter">
                </label>
            </div>
            <div class="form-group col-md-1">
                <input type="submit" value="Search" >
            </div>
        </form>
        <table class="table table-striped table-bordered w-50 pl-3">
            <thead class="table-dark">
            <tr>
                <th scope="col"> Title</th>
                <th scope="col"> Unique code</th>
                <th scope="col"> Lost Price</th>
                <th scope="col"> Return Book</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="book : ${books}">
                <td th:text="${book.book.bookName}"></td>
                <td th:text="${book.uniqueCode}"></td>
                <td>
                    <form th:method="DELETE" th:action="@{/book/delete/{id}/{readerId}(readerId=${reader.id}, id=${book.id})}">
                        <input type="submit" th:value="${book.book.price}">
                    </form>
                </td>
                <td>
                    <form th:method="POST" th:action="@{/book/return/{id}/{readerId}(readerId=${reader.id}, id=${book.id})}">
                        <input type="submit" value="return">
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div th:if="${reader.getSizeBlacklist() != 0}">
        <label> Indebtedness </label>
        <form method="POST" th:action="@{/reader/filter/blacklistFilter/}">
            <div class="form-group col-md-1 pt-3">
                <label>Search
                    <input type="text" name="blacklistFilter">
                </label>
            </div>
            <div>
                <input class="btn btn-dark" type="submit" value="Search" >
            </div>
        </form>
        <table class="table table-striped table-bordered">
            <thead class="table-dark">
            <tr>
                <th scope="col"> Title</th>
                <th scope="col"> Unique code</th>
                <th scope="col"> Lost Price</th>
                <th scope="col"> Return Date</th>
                <th scope="col"> Price</th>
                <th scope="col"> Return Book</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="book : ${owed}" th:if="${book.paid == false}">
                <td th:text="${book.specificBook.book.bookName}"></td>
                <td th:text="${book.specificBook.uniqueCode}"></td>
                <td>
                    <form th:method="DELETE" th:action="@{/book/delete/{id}/{readerId}(readerId=${reader.id}, id=${book.id})}">
                        <input type="submit" th:value="${book.price}">
                    </form>
                </td>
                <td th:text="${book.specificBook.getReturnDate()}"></td>
                <td th:text="${book.normalRepresentation()}"></td>
                <td>
                    <form th:method="POST" th:action="@{/book/return/{id}/{readerId}(readerId=${reader.id}, id=${book.id})}">
                        <input type="submit" value="return">
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</body>
</html>